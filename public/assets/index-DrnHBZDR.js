(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();const Ge="http://localhost:4000/api",S={async fetchAPI(e,t){try{const n=`${Ge}${e}`,o=await fetch(n,t);if(o.status!==204){const i=await o.json();return o.ok?i:_.initErrorModal({status:o.status,message:i.error})}return!0}catch(n){return _.initErrorModal({status:500,message:n.message})}},async getLists(){return await S.fetchAPI("/lists")},async createList(e){return await S.fetchAPI("/lists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},async modifyList(e,t){return await S.fetchAPI(`/lists/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},async deleteList(e){return await S.fetchAPI(`/lists/${e}`,{method:"DELETE"})},async createCard(e){return await S.fetchAPI("/cards",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},async getCard(e){return await S.fetchAPI(`/cards/${e}`)},async modifyCard(e,t){return await S.fetchAPI(`/cards/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},async deleteCard(e){return await S.fetchAPI(`/cards/${e}`,{method:"DELETE"})},async associateCardToTag(e,t){return await S.fetchAPI(`/cards/${e}/tags/${t}`,{method:"PUT"})},async dissociateCardFromTag(e,t){return await S.fetchAPI(`/cards/${e}/tags/${t}`,{method:"DELETE"})},async getTags(){return await S.fetchAPI("/tags")},async getTag(e){return await S.fetchAPI(`/tags/${e}`)}};/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,o)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ye(Object(n),!0).forEach(function(o){ze(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Bt(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bt=function(t){return typeof t}:Bt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bt(e)}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(){return K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},K.apply(this,arguments)}function Ue(e,t){if(e==null)return{};var n={},o=Object.keys(e),i,r;for(r=0;r<o.length;r++)i=o[r],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Ve(e,t){if(e==null)return{};var n=Ue(e,t),o,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var Je="1.15.6";function J(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Z=J(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Lt=J(/Edge/i),be=J(/firefox/i),Ot=J(/safari/i)&&!J(/chrome/i)&&!J(/android/i),fe=J(/iP(ad|od|hone)/i),Ae=J(/chrome/i)&&J(/android/i),Pe={capture:!1,passive:!1};function v(e,t,n){e.addEventListener(t,n,!Z&&Pe)}function g(e,t,n){e.removeEventListener(t,n,!Z&&Pe)}function Wt(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Ie(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function X(e,t,n,o){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Wt(e,t):Wt(e,t))||o&&e===n)return e;if(e===n)break}while(e=Ie(e))}return null}var Ee=/\s+/g;function F(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(Ee," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(Ee," ")}}function m(e,t,n){var o=e&&e.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=n+(typeof n=="string"?"":"px")}}function gt(e,t){var n="";if(typeof e=="string")n=e;else do{var o=m(e,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function Me(e,t,n){if(e){var o=e.getElementsByTagName(t),i=0,r=o.length;if(n)for(;i<r;i++)n(o[i],i);return o}return[]}function G(){var e=document.scrollingElement;return e||document.documentElement}function A(e,t,n,o,i){if(!(!e.getBoundingClientRect&&e!==window)){var r,a,s,l,c,f,u;if(e!==window&&e.parentNode&&e!==G()?(r=e.getBoundingClientRect(),a=r.top,s=r.left,l=r.bottom,c=r.right,f=r.height,u=r.width):(a=0,s=0,l=window.innerHeight,c=window.innerWidth,f=window.innerHeight,u=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!Z))do if(i&&i.getBoundingClientRect&&(m(i,"transform")!=="none"||n&&m(i,"position")!=="static")){var y=i.getBoundingClientRect();a-=y.top+parseInt(m(i,"border-top-width")),s-=y.left+parseInt(m(i,"border-left-width")),l=a+r.height,c=s+r.width;break}while(i=i.parentNode);if(o&&e!==window){var w=gt(i||e),b=w&&w.a,E=w&&w.d;w&&(a/=E,s/=b,u/=b,f/=E,l=a+f,c=s+u)}return{top:a,left:s,bottom:l,right:c,width:u,height:f}}}function we(e,t,n){for(var o=it(e,!0),i=A(e)[t];o;){var r=A(o)[n],a=void 0;if(a=i>=r,!a)return o;if(o===G())break;o=it(o,!1)}return!1}function vt(e,t,n,o){for(var i=0,r=0,a=e.children;r<a.length;){if(a[r].style.display!=="none"&&a[r]!==h.ghost&&(o||a[r]!==h.dragged)&&X(a[r],n.draggable,e,!1)){if(i===t)return a[r];i++}r++}return null}function he(e,t){for(var n=e.lastElementChild;n&&(n===h.ghost||m(n,"display")==="none"||t&&!Wt(n,t));)n=n.previousElementSibling;return n||null}function B(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==h.clone&&(!t||Wt(e,t))&&n++;return n}function Se(e){var t=0,n=0,o=G();if(e)do{var i=gt(e),r=i.a,a=i.d;t+=e.scrollLeft*r,n+=e.scrollTop*a}while(e!==o&&(e=e.parentNode));return[t,n]}function Ke(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n)}return-1}function it(e,t){if(!e||!e.getBoundingClientRect)return G();var n=e,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=m(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return G();if(o||t)return n;o=!0}}while(n=n.parentNode);return G()}function Ze(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Zt(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var At;function Le(e,t){return function(){if(!At){var n=arguments,o=this;n.length===1?e.call(o,n[0]):e.apply(o,n),At=setTimeout(function(){At=void 0},t)}}}function Qe(){clearTimeout(At),At=void 0}function xe(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Ne(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function ke(e,t,n){var o={};return Array.from(e.children).forEach(function(i){var r,a,s,l;if(!(!X(i,t.draggable,e,!1)||i.animated||i===n)){var c=A(i);o.left=Math.min((r=o.left)!==null&&r!==void 0?r:1/0,c.left),o.top=Math.min((a=o.top)!==null&&a!==void 0?a:1/0,c.top),o.right=Math.max((s=o.right)!==null&&s!==void 0?s:-1/0,c.right),o.bottom=Math.max((l=o.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var N="Sortable"+new Date().getTime();function tn(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(i){if(!(m(i,"display")==="none"||i===h.ghost)){e.push({target:i,rect:A(i)});var r=z({},e[e.length-1].rect);if(i.thisAnimationDuration){var a=gt(i,!0);a&&(r.top-=a.f,r.left-=a.e)}i.fromRect=r}})}},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(Ke(e,{target:o}),1)},animateAll:function(o){var i=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var r=!1,a=0;e.forEach(function(s){var l=0,c=s.target,f=c.fromRect,u=A(c),y=c.prevFromRect,w=c.prevToRect,b=s.rect,E=gt(c,!0);E&&(u.top-=E.f,u.left-=E.e),c.toRect=u,c.thisAnimationDuration&&Zt(y,u)&&!Zt(f,u)&&(b.top-u.top)/(b.left-u.left)===(f.top-u.top)/(f.left-u.left)&&(l=nn(b,y,w,i.options)),Zt(u,f)||(c.prevFromRect=f,c.prevToRect=u,l||(l=i.options.animation),i.animate(c,b,u,l)),l&&(r=!0,a=Math.max(a,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),r?t=setTimeout(function(){typeof o=="function"&&o()},a):typeof o=="function"&&o(),e=[]},animate:function(o,i,r,a){if(a){m(o,"transition",""),m(o,"transform","");var s=gt(this.el),l=s&&s.a,c=s&&s.d,f=(i.left-r.left)/(l||1),u=(i.top-r.top)/(c||1);o.animatingX=!!f,o.animatingY=!!u,m(o,"transform","translate3d("+f+"px,"+u+"px,0)"),this.forRepaintDummy=en(o),m(o,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),m(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){m(o,"transition",""),m(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},a)}}}}function en(e){return e.offsetWidth}function nn(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var ut=[],Qt={initializeByDefault:!0},xt={mount:function(t){for(var n in Qt)Qt.hasOwnProperty(n)&&!(n in t)&&(t[n]=Qt[n]);ut.forEach(function(o){if(o.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),ut.push(t)},pluginEvent:function(t,n,o){var i=this;this.eventCanceled=!1,o.cancel=function(){i.eventCanceled=!0};var r=t+"Global";ut.forEach(function(a){n[a.pluginName]&&(n[a.pluginName][r]&&n[a.pluginName][r](z({sortable:n},o)),n.options[a.pluginName]&&n[a.pluginName][t]&&n[a.pluginName][t](z({sortable:n},o)))})},initializePlugins:function(t,n,o,i){ut.forEach(function(s){var l=s.pluginName;if(!(!t.options[l]&&!s.initializeByDefault)){var c=new s(t,n,t.options);c.sortable=t,c.options=t.options,t[l]=c,K(o,c.defaults)}});for(var r in t.options)if(t.options.hasOwnProperty(r)){var a=this.modifyOption(t,r,t.options[r]);typeof a<"u"&&(t.options[r]=a)}},getEventProperties:function(t,n){var o={};return ut.forEach(function(i){typeof i.eventProperties=="function"&&K(o,i.eventProperties.call(n[i.pluginName],t))}),o},modifyOption:function(t,n,o){var i;return ut.forEach(function(r){t[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[n]=="function"&&(i=r.optionListeners[n].call(t[r.pluginName],o))}),i}};function on(e){var t=e.sortable,n=e.rootEl,o=e.name,i=e.targetEl,r=e.cloneEl,a=e.toEl,s=e.fromEl,l=e.oldIndex,c=e.newIndex,f=e.oldDraggableIndex,u=e.newDraggableIndex,y=e.originalEvent,w=e.putSortable,b=e.extraEventProperties;if(t=t||n&&n[N],!!t){var E,j=t.options,U="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Z&&!Lt?E=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(o,!0,!0)),E.to=a||n,E.from=s||n,E.item=i||n,E.clone=r,E.oldIndex=l,E.newIndex=c,E.oldDraggableIndex=f,E.newDraggableIndex=u,E.originalEvent=y,E.pullMode=w?w.lastPutMode:void 0;var M=z(z({},b),xt.getEventProperties(o,t));for(var Y in M)E[Y]=M[Y];n&&n.dispatchEvent(E),j[U]&&j[U].call(t,E)}}var rn=["evt"],x=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=o.evt,r=Ve(o,rn);xt.pluginEvent.bind(h)(t,n,z({dragEl:d,parentEl:T,ghostEl:p,rootEl:C,nextEl:dt,lastDownEl:jt,cloneEl:D,cloneHidden:nt,dragStarted:Dt,putSortable:P,activeSortable:h.active,originalEvent:i,oldIndex:pt,oldDraggableIndex:Pt,newIndex:R,newDraggableIndex:et,hideGhostForTarget:Be,unhideGhostForTarget:je,cloneNowHidden:function(){nt=!0},cloneNowShown:function(){nt=!1},dispatchSortableEvent:function(s){L({sortable:n,name:s,originalEvent:i})}},r))};function L(e){on(z({putSortable:P,cloneEl:D,targetEl:d,rootEl:C,oldIndex:pt,oldDraggableIndex:Pt,newIndex:R,newDraggableIndex:et},e))}var d,T,p,C,dt,jt,D,nt,pt,R,Pt,et,kt,P,mt=!1,Gt=!1,zt=[],lt,$,te,ee,Ce,De,Dt,ft,It,Mt=!1,qt=!1,Yt,I,ne=[],se=!1,Ut=[],Kt=typeof document<"u",Ft=fe,Te=Lt||Z?"cssFloat":"float",an=Kt&&!Ae&&!fe&&"draggable"in document.createElement("div"),qe=function(){if(Kt){if(Z)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Fe=function(t,n){var o=m(t),i=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),r=vt(t,0,n),a=vt(t,1,n),s=r&&m(r),l=a&&m(a),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+A(r).width,f=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+A(a).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s.float&&s.float!=="none"){var u=s.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return r&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||c>=i&&o[Te]==="none"||a&&o[Te]==="none"&&c+f>i)?"vertical":"horizontal"},sn=function(t,n,o){var i=o?t.left:t.top,r=o?t.right:t.bottom,a=o?t.width:t.height,s=o?n.left:n.top,l=o?n.right:n.bottom,c=o?n.width:n.height;return i===s||r===l||i+a/2===s+c/2},ln=function(t,n){var o;return zt.some(function(i){var r=i[N].options.emptyInsertThreshold;if(!(!r||he(i))){var a=A(i),s=t>=a.left-r&&t<=a.right+r,l=n>=a.top-r&&n<=a.bottom+r;if(s&&l)return o=i}}),o},Re=function(t){function n(r,a){return function(s,l,c,f){var u=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(r==null&&(a||u))return!0;if(r==null||r===!1)return!1;if(a&&r==="clone")return r;if(typeof r=="function")return n(r(s,l,c,f),a)(s,l,c,f);var y=(a?s:l).options.group.name;return r===!0||typeof r=="string"&&r===y||r.join&&r.indexOf(y)>-1}}var o={},i=t.group;(!i||Bt(i)!="object")&&(i={name:i}),o.name=i.name,o.checkPull=n(i.pull,!0),o.checkPut=n(i.put),o.revertClone=i.revertClone,t.group=o},Be=function(){!qe&&p&&m(p,"display","none")},je=function(){!qe&&p&&m(p,"display","")};Kt&&!Ae&&document.addEventListener("click",function(e){if(Gt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Gt=!1,!1},!0);var ct=function(t){if(d){t=t.touches?t.touches[0]:t;var n=ln(t.clientX,t.clientY);if(n){var o={};for(var i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[N]._onDragOver(o)}}},cn=function(t){d&&d.parentNode[N]._isOutsideThisEl(t.target)};function h(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=K({},t),e[N]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Fe(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:h.supportPointer!==!1&&"PointerEvent"in window&&(!Ot||fe),emptyInsertThreshold:5};xt.initializePlugins(this,e,n);for(var o in n)!(o in t)&&(t[o]=n[o]);Re(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:an,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?v(e,"pointerdown",this._onTapStart):(v(e,"mousedown",this._onTapStart),v(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(v(e,"dragover",this),v(e,"dragenter",this)),zt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),K(this,tn())}h.prototype={constructor:h,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(ft=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,d):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,o=this.el,i=this.options,r=i.preventOnFilter,a=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(s||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,f=i.filter;if(vn(o),!d&&!(/mousedown|pointerdown/.test(a)&&t.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Ot&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=X(l,i.draggable,o,!1),!(l&&l.animated)&&jt!==l)){if(pt=B(l),Pt=B(l,i.draggable),typeof f=="function"){if(f.call(this,t,l,this)){L({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:o,fromEl:o}),x("filter",n,{evt:t}),r&&t.preventDefault();return}}else if(f&&(f=f.split(",").some(function(u){if(u=X(c,u.trim(),o,!1),u)return L({sortable:n,rootEl:u,name:"filter",targetEl:l,fromEl:o,toEl:o}),x("filter",n,{evt:t}),!0}),f)){r&&t.preventDefault();return}i.handle&&!X(c,i.handle,o,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,n,o){var i=this,r=i.el,a=i.options,s=r.ownerDocument,l;if(o&&!d&&o.parentNode===r){var c=A(o);if(C=r,d=o,T=d.parentNode,dt=d.nextSibling,jt=o,kt=a.group,h.dragged=d,lt={target:d,clientX:(n||t).clientX,clientY:(n||t).clientY},Ce=lt.clientX-c.left,De=lt.clientY-c.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,d.style["will-change"]="all",l=function(){if(x("delayEnded",i,{evt:t}),h.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!be&&i.nativeDraggable&&(d.draggable=!0),i._triggerDragStart(t,n),L({sortable:i,name:"choose",originalEvent:t}),F(d,a.chosenClass,!0)},a.ignore.split(",").forEach(function(f){Me(d,f.trim(),oe)}),v(s,"dragover",ct),v(s,"mousemove",ct),v(s,"touchmove",ct),a.supportPointer?(v(s,"pointerup",i._onDrop),!this.nativeDraggable&&v(s,"pointercancel",i._onDrop)):(v(s,"mouseup",i._onDrop),v(s,"touchend",i._onDrop),v(s,"touchcancel",i._onDrop)),be&&this.nativeDraggable&&(this.options.touchStartThreshold=4,d.draggable=!0),x("delayStart",this,{evt:t}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Lt||Z))){if(h.eventCanceled){this._onDrop();return}a.supportPointer?(v(s,"pointerup",i._disableDelayedDrag),v(s,"pointercancel",i._disableDelayedDrag)):(v(s,"mouseup",i._disableDelayedDrag),v(s,"touchend",i._disableDelayedDrag),v(s,"touchcancel",i._disableDelayedDrag)),v(s,"mousemove",i._delayedDragTouchMoveHandler),v(s,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&v(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){d&&oe(d),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;g(t,"mouseup",this._disableDelayedDrag),g(t,"touchend",this._disableDelayedDrag),g(t,"touchcancel",this._disableDelayedDrag),g(t,"pointerup",this._disableDelayedDrag),g(t,"pointercancel",this._disableDelayedDrag),g(t,"mousemove",this._delayedDragTouchMoveHandler),g(t,"touchmove",this._delayedDragTouchMoveHandler),g(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?v(document,"pointermove",this._onTouchMove):n?v(document,"touchmove",this._onTouchMove):v(document,"mousemove",this._onTouchMove):(v(d,"dragend",this),v(C,"dragstart",this._onDragStart));try{document.selection?$t(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(mt=!1,C&&d){x("dragStarted",this,{evt:n}),this.nativeDraggable&&v(document,"dragover",cn);var o=this.options;!t&&F(d,o.dragClass,!1),F(d,o.ghostClass,!0),h.active=this,t&&this._appendGhost(),L({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if($){this._lastX=$.clientX,this._lastY=$.clientY,Be();for(var t=document.elementFromPoint($.clientX,$.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint($.clientX,$.clientY),t!==n);)n=t;if(d.parentNode[N]._isOutsideThisEl(t),n)do{if(n[N]){var o=void 0;if(o=n[N]._onDragOver({clientX:$.clientX,clientY:$.clientY,target:t,rootEl:n}),o&&!this.options.dragoverBubble)break}t=n}while(n=Ie(n));je()}},_onTouchMove:function(t){if(lt){var n=this.options,o=n.fallbackTolerance,i=n.fallbackOffset,r=t.touches?t.touches[0]:t,a=p&&gt(p,!0),s=p&&a&&a.a,l=p&&a&&a.d,c=Ft&&I&&Se(I),f=(r.clientX-lt.clientX+i.x)/(s||1)+(c?c[0]-ne[0]:0)/(s||1),u=(r.clientY-lt.clientY+i.y)/(l||1)+(c?c[1]-ne[1]:0)/(l||1);if(!h.active&&!mt){if(o&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(p){a?(a.e+=f-(te||0),a.f+=u-(ee||0)):a={a:1,b:0,c:0,d:1,e:f,f:u};var y="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");m(p,"webkitTransform",y),m(p,"mozTransform",y),m(p,"msTransform",y),m(p,"transform",y),te=f,ee=u,$=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!p){var t=this.options.fallbackOnBody?document.body:C,n=A(d,!0,Ft,!0,t),o=this.options;if(Ft){for(I=t;m(I,"position")==="static"&&m(I,"transform")==="none"&&I!==document;)I=I.parentNode;I!==document.body&&I!==document.documentElement?(I===document&&(I=G()),n.top+=I.scrollTop,n.left+=I.scrollLeft):I=G(),ne=Se(I)}p=d.cloneNode(!0),F(p,o.ghostClass,!1),F(p,o.fallbackClass,!0),F(p,o.dragClass,!0),m(p,"transition",""),m(p,"transform",""),m(p,"box-sizing","border-box"),m(p,"margin",0),m(p,"top",n.top),m(p,"left",n.left),m(p,"width",n.width),m(p,"height",n.height),m(p,"opacity","0.8"),m(p,"position",Ft?"absolute":"fixed"),m(p,"zIndex","100000"),m(p,"pointerEvents","none"),h.ghost=p,t.appendChild(p),m(p,"transform-origin",Ce/parseInt(p.style.width)*100+"% "+De/parseInt(p.style.height)*100+"%")}},_onDragStart:function(t,n){var o=this,i=t.dataTransfer,r=o.options;if(x("dragStart",this,{evt:t}),h.eventCanceled){this._onDrop();return}x("setupClone",this),h.eventCanceled||(D=Ne(d),D.removeAttribute("id"),D.draggable=!1,D.style["will-change"]="",this._hideClone(),F(D,this.options.chosenClass,!1),h.clone=D),o.cloneId=$t(function(){x("clone",o),!h.eventCanceled&&(o.options.removeCloneOnHide||C.insertBefore(D,d),o._hideClone(),L({sortable:o,name:"clone"}))}),!n&&F(d,r.dragClass,!0),n?(Gt=!0,o._loopId=setInterval(o._emulateDragOver,50)):(g(document,"mouseup",o._onDrop),g(document,"touchend",o._onDrop),g(document,"touchcancel",o._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(o,i,d)),v(document,"drop",o),m(d,"transform","translateZ(0)")),mt=!0,o._dragStartId=$t(o._dragStarted.bind(o,n,t)),v(document,"selectstart",o),Dt=!0,window.getSelection().removeAllRanges(),Ot&&m(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,o=t.target,i,r,a,s=this.options,l=s.group,c=h.active,f=kt===l,u=s.sort,y=P||c,w,b=this,E=!1;if(se)return;function j(St,He){x(St,b,z({evt:t,isOwner:f,axis:w?"vertical":"horizontal",revert:a,dragRect:i,targetRect:r,canSort:u,fromSortable:y,target:o,completed:M,onMove:function(ve,We){return Rt(C,n,d,i,ve,A(ve),t,We)},changed:Y},He))}function U(){j("dragOverAnimationCapture"),b.captureAnimationState(),b!==y&&y.captureAnimationState()}function M(St){return j("dragOverCompleted",{insertion:St}),St&&(f?c._hideClone():c._showClone(b),b!==y&&(F(d,P?P.options.ghostClass:c.options.ghostClass,!1),F(d,s.ghostClass,!0)),P!==b&&b!==h.active?P=b:b===h.active&&P&&(P=null),y===b&&(b._ignoreWhileAnimating=o),b.animateAll(function(){j("dragOverAnimationComplete"),b._ignoreWhileAnimating=null}),b!==y&&(y.animateAll(),y._ignoreWhileAnimating=null)),(o===d&&!d.animated||o===n&&!o.animated)&&(ft=null),!s.dragoverBubble&&!t.rootEl&&o!==document&&(d.parentNode[N]._isOutsideThisEl(t.target),!St&&ct(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),E=!0}function Y(){R=B(d),et=B(d,s.draggable),L({sortable:b,name:"change",toEl:n,newIndex:R,newDraggableIndex:et,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),o=X(o,s.draggable,n,!0),j("dragOver"),h.eventCanceled)return E;if(d.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||b._ignoreWhileAnimating===o)return M(!1);if(Gt=!1,c&&!s.disabled&&(f?u||(a=T!==C):P===this||(this.lastPutMode=kt.checkPull(this,c,d,t))&&l.checkPut(this,c,d,t))){if(w=this._getDirection(t,o)==="vertical",i=A(d),j("dragOverValid"),h.eventCanceled)return E;if(a)return T=C,U(),this._hideClone(),j("revert"),h.eventCanceled||(dt?C.insertBefore(d,dt):C.appendChild(d)),M(!0);var k=he(n,s.draggable);if(!k||hn(t,w,this)&&!k.animated){if(k===d)return M(!1);if(k&&n===t.target&&(o=k),o&&(r=A(o)),Rt(C,n,d,i,o,r,t,!!o)!==!1)return U(),k&&k.nextSibling?n.insertBefore(d,k.nextSibling):n.appendChild(d),T=n,Y(),M(!0)}else if(k&&fn(t,w,this)){var rt=vt(n,0,s,!0);if(rt===d)return M(!1);if(o=rt,r=A(o),Rt(C,n,d,i,o,r,t,!1)!==!1)return U(),n.insertBefore(d,rt),T=n,Y(),M(!0)}else if(o.parentNode===n){r=A(o);var H=0,at,yt=d.parentNode!==n,q=!sn(d.animated&&d.toRect||i,o.animated&&o.toRect||r,w),bt=w?"top":"left",Q=we(o,"top","top")||we(d,"top","top"),Et=Q?Q.scrollTop:void 0;ft!==o&&(at=r[bt],Mt=!1,qt=!q&&s.invertSwap||yt),H=mn(t,o,r,w,q?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,qt,ft===o);var V;if(H!==0){var st=B(d);do st-=H,V=T.children[st];while(V&&(m(V,"display")==="none"||V===p))}if(H===0||V===o)return M(!1);ft=o,It=H;var wt=o.nextElementSibling,tt=!1;tt=H===1;var Nt=Rt(C,n,d,i,o,r,t,tt);if(Nt!==!1)return(Nt===1||Nt===-1)&&(tt=Nt===1),se=!0,setTimeout(un,30),U(),tt&&!wt?n.appendChild(d):o.parentNode.insertBefore(d,tt?wt:o),Q&&xe(Q,0,Et-Q.scrollTop),T=d.parentNode,at!==void 0&&!qt&&(Yt=Math.abs(at-A(o)[bt])),Y(),M(!0)}if(n.contains(d))return M(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){g(document,"mousemove",this._onTouchMove),g(document,"touchmove",this._onTouchMove),g(document,"pointermove",this._onTouchMove),g(document,"dragover",ct),g(document,"mousemove",ct),g(document,"touchmove",ct)},_offUpEvents:function(){var t=this.el.ownerDocument;g(t,"mouseup",this._onDrop),g(t,"touchend",this._onDrop),g(t,"pointerup",this._onDrop),g(t,"pointercancel",this._onDrop),g(t,"touchcancel",this._onDrop),g(document,"selectstart",this)},_onDrop:function(t){var n=this.el,o=this.options;if(R=B(d),et=B(d,o.draggable),x("drop",this,{evt:t}),T=d&&d.parentNode,R=B(d),et=B(d,o.draggable),h.eventCanceled){this._nulling();return}mt=!1,qt=!1,Mt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),le(this.cloneId),le(this._dragStartId),this.nativeDraggable&&(g(document,"drop",this),g(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ot&&m(document.body,"user-select",""),m(d,"transform",""),t&&(Dt&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),p&&p.parentNode&&p.parentNode.removeChild(p),(C===T||P&&P.lastPutMode!=="clone")&&D&&D.parentNode&&D.parentNode.removeChild(D),d&&(this.nativeDraggable&&g(d,"dragend",this),oe(d),d.style["will-change"]="",Dt&&!mt&&F(d,P?P.options.ghostClass:this.options.ghostClass,!1),F(d,this.options.chosenClass,!1),L({sortable:this,name:"unchoose",toEl:T,newIndex:null,newDraggableIndex:null,originalEvent:t}),C!==T?(R>=0&&(L({rootEl:T,name:"add",toEl:T,fromEl:C,originalEvent:t}),L({sortable:this,name:"remove",toEl:T,originalEvent:t}),L({rootEl:T,name:"sort",toEl:T,fromEl:C,originalEvent:t}),L({sortable:this,name:"sort",toEl:T,originalEvent:t})),P&&P.save()):R!==pt&&R>=0&&(L({sortable:this,name:"update",toEl:T,originalEvent:t}),L({sortable:this,name:"sort",toEl:T,originalEvent:t})),h.active&&((R==null||R===-1)&&(R=pt,et=Pt),L({sortable:this,name:"end",toEl:T,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){x("nulling",this),C=d=T=p=dt=D=jt=nt=lt=$=Dt=R=et=pt=Pt=ft=It=P=kt=h.dragged=h.ghost=h.clone=h.active=null,Ut.forEach(function(t){t.checked=!0}),Ut.length=te=ee=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":d&&(this._onDragOver(t),dn(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,o=this.el.children,i=0,r=o.length,a=this.options;i<r;i++)n=o[i],X(n,a.draggable,this.el,!1)&&t.push(n.getAttribute(a.dataIdAttr)||gn(n));return t},sort:function(t,n){var o={},i=this.el;this.toArray().forEach(function(r,a){var s=i.children[a];X(s,this.options.draggable,i,!1)&&(o[r]=s)},this),n&&this.captureAnimationState(),t.forEach(function(r){o[r]&&(i.removeChild(o[r]),i.appendChild(o[r]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return X(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var o=this.options;if(n===void 0)return o[t];var i=xt.modifyOption(this,t,n);typeof i<"u"?o[t]=i:o[t]=n,t==="group"&&Re(o)},destroy:function(){x("destroy",this);var t=this.el;t[N]=null,g(t,"mousedown",this._onTapStart),g(t,"touchstart",this._onTapStart),g(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(g(t,"dragover",this),g(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),zt.splice(zt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!nt){if(x("hideClone",this),h.eventCanceled)return;m(D,"display","none"),this.options.removeCloneOnHide&&D.parentNode&&D.parentNode.removeChild(D),nt=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(nt){if(x("showClone",this),h.eventCanceled)return;d.parentNode==C&&!this.options.group.revertClone?C.insertBefore(D,d):dt?C.insertBefore(D,dt):C.appendChild(D),this.options.group.revertClone&&this.animate(d,D),m(D,"display",""),nt=!1}}};function dn(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Rt(e,t,n,o,i,r,a,s){var l,c=e[N],f=c.options.onMove,u;return window.CustomEvent&&!Z&&!Lt?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=n,l.draggedRect=o,l.related=i||t,l.relatedRect=r||A(t),l.willInsertAfter=s,l.originalEvent=a,e.dispatchEvent(l),f&&(u=f.call(c,l,a)),u}function oe(e){e.draggable=!1}function un(){se=!1}function fn(e,t,n){var o=A(vt(n.el,0,n.options,!0)),i=ke(n.el,n.options,p),r=10;return t?e.clientX<i.left-r||e.clientY<o.top&&e.clientX<o.right:e.clientY<i.top-r||e.clientY<o.bottom&&e.clientX<o.left}function hn(e,t,n){var o=A(he(n.el,n.options.draggable)),i=ke(n.el,n.options,p),r=10;return t?e.clientX>i.right+r||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>i.bottom+r||e.clientX>o.right&&e.clientY>o.top}function mn(e,t,n,o,i,r,a,s){var l=o?e.clientY:e.clientX,c=o?n.height:n.width,f=o?n.top:n.left,u=o?n.bottom:n.right,y=!1;if(!a){if(s&&Yt<c*i){if(!Mt&&(It===1?l>f+c*r/2:l<u-c*r/2)&&(Mt=!0),Mt)y=!0;else if(It===1?l<f+Yt:l>u-Yt)return-It}else if(l>f+c*(1-i)/2&&l<u-c*(1-i)/2)return pn(t)}return y=y||a,y&&(l<f+c*r/2||l>u-c*r/2)?l>f+c/2?1:-1:0}function pn(e){return B(d)<B(e)?1:-1}function gn(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function vn(e){Ut.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&Ut.push(o)}}function $t(e){return setTimeout(e,0)}function le(e){return clearTimeout(e)}Kt&&v(document,"touchmove",function(e){(h.active||mt)&&e.cancelable&&e.preventDefault()});h.utils={on:v,off:g,css:m,find:Me,is:function(t,n){return!!X(t,n,t,!1)},extend:Ze,throttle:Le,closest:X,toggleClass:F,clone:Ne,index:B,nextTick:$t,cancelNextTick:le,detectDirection:Fe,getChild:vt,expando:N};h.get=function(e){return e[N]};h.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(h.utils=z(z({},h.utils),o.utils)),xt.mount(o)})};h.create=function(e,t){return new h(e,t)};h.version=Je;var O=[],Tt,ce,de=!1,ie,re,Vt,_t;function yn(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):this.options.supportPointer?v(document,"pointermove",this._handleFallbackAutoScroll):o.touches?v(document,"touchmove",this._handleFallbackAutoScroll):v(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?g(document,"dragover",this._handleAutoScroll):(g(document,"pointermove",this._handleFallbackAutoScroll),g(document,"touchmove",this._handleFallbackAutoScroll),g(document,"mousemove",this._handleFallbackAutoScroll)),_e(),Xt(),Qe()},nulling:function(){Vt=ce=Tt=de=_t=ie=re=null,O.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var i=this,r=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(r,a);if(Vt=n,o||this.options.forceAutoScrollFallback||Lt||Z||Ot){ae(n,this.options,s,o);var l=it(s,!0);de&&(!_t||r!==ie||a!==re)&&(_t&&_e(),_t=setInterval(function(){var c=it(document.elementFromPoint(r,a),!0);c!==l&&(l=c,Xt()),ae(n,i.options,c,o)},10),ie=r,re=a)}else{if(!this.options.bubbleScroll||it(s,!0)===G()){Xt();return}ae(n,this.options,it(s,!1),!1)}}},K(e,{pluginName:"scroll",initializeByDefault:!0})}function Xt(){O.forEach(function(e){clearInterval(e.pid)}),O=[]}function _e(){clearInterval(_t)}var ae=Le(function(e,t,n,o){if(t.scroll){var i=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,a=t.scrollSensitivity,s=t.scrollSpeed,l=G(),c=!1,f;ce!==n&&(ce=n,Xt(),Tt=t.scroll,f=t.scrollFn,Tt===!0&&(Tt=it(n,!0)));var u=0,y=Tt;do{var w=y,b=A(w),E=b.top,j=b.bottom,U=b.left,M=b.right,Y=b.width,k=b.height,rt=void 0,H=void 0,at=w.scrollWidth,yt=w.scrollHeight,q=m(w),bt=w.scrollLeft,Q=w.scrollTop;w===l?(rt=Y<at&&(q.overflowX==="auto"||q.overflowX==="scroll"||q.overflowX==="visible"),H=k<yt&&(q.overflowY==="auto"||q.overflowY==="scroll"||q.overflowY==="visible")):(rt=Y<at&&(q.overflowX==="auto"||q.overflowX==="scroll"),H=k<yt&&(q.overflowY==="auto"||q.overflowY==="scroll"));var Et=rt&&(Math.abs(M-i)<=a&&bt+Y<at)-(Math.abs(U-i)<=a&&!!bt),V=H&&(Math.abs(j-r)<=a&&Q+k<yt)-(Math.abs(E-r)<=a&&!!Q);if(!O[u])for(var st=0;st<=u;st++)O[st]||(O[st]={});(O[u].vx!=Et||O[u].vy!=V||O[u].el!==w)&&(O[u].el=w,O[u].vx=Et,O[u].vy=V,clearInterval(O[u].pid),(Et!=0||V!=0)&&(c=!0,O[u].pid=setInterval((function(){o&&this.layer===0&&h.active._onTouchMove(Vt);var wt=O[this.layer].vy?O[this.layer].vy*s:0,tt=O[this.layer].vx?O[this.layer].vx*s:0;typeof f=="function"&&f.call(h.dragged.parentNode[N],tt,wt,e,Vt,O[this.layer].el)!=="continue"||xe(O[this.layer].el,tt,wt)}).bind({layer:u}),24))),u++}while(t.bubbleScroll&&y!==l&&(y=it(y,!1)));de=c}},30),Ye=function(t){var n=t.originalEvent,o=t.putSortable,i=t.dragEl,r=t.activeSortable,a=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(n){var c=o||r;s();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,u=document.elementFromPoint(f.clientX,f.clientY);l(),c&&!c.el.contains(u)&&(a("spill"),this.onSpill({dragEl:i,putSortable:o}))}};function me(){}me.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var i=vt(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:Ye};K(me,{pluginName:"revertOnSpill"});function pe(){}pe.prototype={onSpill:function(t){var n=t.dragEl,o=t.putSortable,i=o||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:Ye};K(pe,{pluginName:"removeOnSpill"});h.mount(new yn);h.mount(pe,me);const ge={initTags(e,t){t.forEach(n=>{e.querySelector('[slot="card-tags"]').prepend(ge.createTagElem(n))})},createTagElem(e){const n=document.querySelector("#tag-template").content.cloneNode(!0).querySelector(".tag");return n.querySelector('[slot="tag-name"]').textContent=e.name,n.style.backgroundColor=e.color,n.dataset.id=e.id,n}},bn={rgb2Hex(e){const t=/rgb\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,[,...n]=e.match(t),o=n.map(i=>parseInt(i,10).toString(16).padStart(2,"0").toUpperCase());return`#${o[0]}${o[1]}${o[2]}`}},ot={initCards(e,t){const n=[...t].sort((i,r)=>i.position-r.position),o=e.querySelector(".message-body");n.forEach(i=>{const r=ot.createCardElem(i);o.appendChild(r)})},createCardElem(e){var o;const n=document.querySelector("#card-template").content.cloneNode(!0).querySelector("article");return n.querySelector('[slot="card-title"]').textContent=e.title,n.querySelector('[slot="card-content"]').textContent=e.content,n.querySelector(".card-color").style.backgroundColor=e.color,n.querySelector(".modify-card-btn").addEventListener("click",ot.onModifyCardClick),n.querySelector(".delete-card-btn").addEventListener("click",ot.onDeleteCardClick),n.querySelector(".add-tag-btn").addEventListener("click",ot.onAddTagClick),n.dataset.id=e.id,(o=e.tags)!=null&&o.length&&ge.initTags(n,e.tags),n},initSortableCards(e){const t=e.querySelector(".message-body");h.create(t,{animation:150,group:"cards",onEnd:async n=>{const o=n.item.dataset.id,i=n.to.closest("section").dataset.id,a=n.to.parentElement.querySelectorAll(".card");await S.modifyCard(o,{list_id:i}),a.forEach(async(s,l)=>{const{id:c}=s.dataset,f=l+1;await S.modifyCard(c,{position:f})})}})},onModifyCardClick(e){const t=document.querySelector("#modify-card-modal");t.dataset.id=e.currentTarget.closest(".card").dataset.id,t.querySelector('input[name="title"]').value=e.currentTarget.closest("article").querySelector('[slot="card-title"]').textContent,t.querySelector('textarea[name="content"]').value=e.currentTarget.closest("article").querySelector('[slot="card-content"]').textContent;const n=e.currentTarget.closest("article").querySelector(".card-color").style.backgroundColor;t.querySelector('input[name="color"]').value=bn.rgb2Hex(n),t.classList.add("is-active")},deleteCardElem(e){document.querySelector(`.card[data-id="${e}"]`).remove()},onDeleteCardClick(e){const t=e.currentTarget.closest(".card").dataset.id;_.initConfirmModal("Êtes vous sûr de vouloir supprimer cette carte ?",async()=>{await S.deleteCard(t)&&ot.deleteCardElem(t)})},onAddTagClick(e){const t=e.currentTarget.closest(".card").dataset.id;_.initTagModal(t)}},W={initLists(){W.initAddListBtn(),W.initSortableLists(),W.fetchLists()},initSortableLists(){const e=document.querySelector("#lists-container");h.create(e,{animation:150,handle:".message-header",onEnd:async()=>{[...document.querySelectorAll("#lists-container section")].forEach(async(n,o)=>{await S.modifyList(n.dataset.id,{position:o+1})})}})},initAddListBtn(){document.querySelector("#add-list-btn").addEventListener("click",t);function t(){document.querySelector("#add-list-modal").classList.add("is-active")}},async fetchLists(){let e=await S.getLists();e&&(e.sort((t,n)=>t.position-n.position),e.forEach(t=>{const n=W.createListElem(t);document.querySelector("#lists-container").appendChild(n)}))},createListElem(e){var o;const n=document.querySelector("#list-template").content.cloneNode(!0).querySelector("section");return n.querySelector('[slot="list-title"]').textContent=e.title,n.querySelector(".delete-list-btn").addEventListener("click",W.onDeleteListClick),n.querySelector(".modify-list-btn").addEventListener("click",W.onModifyListClick),n.querySelector(".add-card-btn").addEventListener("click",W.onAddCardClick),n.dataset.id=e.id,(o=e.cards)!=null&&o.length&&ot.initCards(n,e.cards),ot.initSortableCards(n),n},deleteListElem(e){document.querySelector(`section[data-id="${e}"]`).remove()},async onDeleteListClick(e){const t=e.currentTarget.closest("section").dataset.id;_.initConfirmModal("Êtes vous sûr de vouloir supprimer cette liste et les cartes qu'elle contient ?",async()=>{await S.deleteList(t)&&W.deleteListElem(t)})},onModifyListClick(e){const t=document.querySelector("#modify-list-modal");t.dataset.id=e.currentTarget.closest("section").dataset.id,t.querySelector('input[name="title"]').value=e.currentTarget.closest("section").querySelector('[slot="list-title"]').textContent,t.classList.add("is-active")},onAddCardClick(e){const t=document.querySelector("#add-card-modal");t.dataset.id=e.currentTarget.closest("section").dataset.id,t.classList.add("is-active")}};/*!
 * bulma-toast 2.4.4 
 * (c) 2018-present @rfoel <rafaelfr@outlook.com> 
 * Released under the MIT License.
 */function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,o)}return n}function ue(e){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Oe(Object(t),!0).forEach(function(o){wn(e,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Oe(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))});return e}function $e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function En(e,t){for(var n,o=0;o<t.length;o++)n=t[o],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function Xe(e,t,n){return t&&En(e.prototype,t),e}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sn={duration:2e3,position:"top-right",closeOnClick:!0,opacity:1,single:!1,offsetTop:0,offsetBottom:0,offsetLeft:0,offsetRight:0,extraClasses:""},ht=ue({},Sn),Ht={},Cn=null,Dn="width:100%;z-index:99999;position:fixed;pointer-events:none;display:flex;flex-direction:column;padding:15px;",Tn=function(e,t,n,o,i){return e==="top-left"?"left:".concat(o,";top:").concat(t,";text-align:left;align-items:flex-start;"):e==="top-right"?"right:".concat(i,";top:").concat(t,";text-align:right;align-items:flex-end;"):e==="top-center"?"top:".concat(t,";left:0;right:0;text-align:center;align-items:center;"):e==="bottom-left"?"left:".concat(o,";bottom:").concat(n,";text-align:left;align-items:flex-start;"):e==="bottom-right"?"right:".concat(i,";bottom:").concat(n,";text-align:right;align-items:flex-end;"):e==="bottom-center"?"bottom:".concat(n,";left:0;right:0;text-align:center;align-items:center;"):e==="center"?"top:0;left:0;right:0;bottom:0;flex-flow:column;justify-content:center;align-items:center;":void 0};function Jt(){var e;return(e=Cn)!==null&&e!==void 0?e:document}function _n(e,t,n,o,i,r){if(Ht.position)return Ht.position;var a=Jt().createElement("div");return a.setAttribute("style",Dn+Tn(t,n,o,i,r)),e.appendChild(a),Ht.position=a,a}function On(e){if(!e.message)throw new Error("message is required");var t=ue(ue({},ht),e),n=new An(t),o=_n(t.appendTo||Jt().body,t.position||ht.position,t.offsetTop||ht.offsetTop,t.offsetBottom||ht.offsetBottom,t.offsetLeft||ht.offsetLeft,t.offsetRight||ht.offsetRight);if(t.single)for(var i=o.lastElementChild;i;)o.removeChild(i),i=o.lastElementChild;o.appendChild(n.element)}var An=function(){function e(t){var n=this;$e(this,e),this.element=Jt().createElement("div"),this.opacity=t.opacity,this.type=t.type,this.animate=t.animate,this.dismissible=t.dismissible,this.closeOnClick=t.closeOnClick,this.message=t.message,this.duration=t.duration,this.pauseOnHover=t.pauseOnHover,this.offsetTop=t.offsetTop,this.offsetBottom=t.offsetBottom,this.offsetLeft=t.offsetLeft,this.offsetRight=t.offsetRight,this.extraClasses=t.extraClasses;var o="width:auto;pointer-events:auto;display:inline-flex;white-space:pre-wrap;opacity:".concat(this.opacity,";"),i=["notification",this.extraClasses];if(this.type&&i.push(this.type),this.animate&&this.animate.in){var r="animate__".concat(this.animate.in),a=this.animate.speed?"animate__".concat(this.animate.speed):"animate__faster";i.push("animate__animated ".concat(r," ").concat(a)),this.onAnimationEnd(function(){return n.element.classList.remove(r)})}if(this.element.className=i.join(" "),this.dismissible){var s=Jt().createElement("button");s.className="delete",s.addEventListener("click",function(){n.destroy()}),this.element.insertAdjacentElement("afterbegin",s)}else o+="padding: 1.25rem 1.5rem";this.closeOnClick&&this.element.addEventListener("click",function(){n.destroy()}),this.element.setAttribute("style",o),typeof this.message=="string"?this.element.insertAdjacentHTML("beforeend",this.message):this.element.appendChild(this.message);var l=new Pn(function(){n.destroy()},this.duration);this.pauseOnHover&&(this.element.addEventListener("mouseover",function(){l.pause()}),this.element.addEventListener("mouseout",function(){l.resume()}))}return Xe(e,[{key:"destroy",value:function(){var t=this;this.animate&&this.animate.out?(this.element.classList.add("animate__".concat(this.animate.out)),this.onAnimationEnd(function(){t.removeParent(t.element.parentNode),t.element.remove()})):(this.removeParent(this.element.parentNode),this.element.remove())}},{key:"removeParent",value:function(t){t&&1>=t.children.length&&(t.remove(),delete Ht.position)}},{key:"onAnimationEnd",value:function(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){},n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(var o in n)if(this.element.style[o]!==void 0){this.element.addEventListener(n[o],function(){return t()});break}}}]),e}(),Pn=function(){function e(t,n){$e(this,e),this.timer,this.start,this.remaining=n,this.callback=t,this.resume()}return Xe(e,[{key:"pause",value:function(){typeof document>"u"||(window.clearTimeout(this.timer),this.remaining-=new Date-this.start)}},{key:"resume",value:function(){typeof document>"u"||(this.start=new Date,window.clearTimeout(this.timer),this.timer=window.setTimeout(this.callback,this.remaining))}}]),e}();function Ct(e,t="is-info"){On({message:e,type:t,dismissible:!0,animate:{in:"bounceInUp",out:"bounceOutDown"},position:"bottom-right"})}const _={initModals(){document.querySelectorAll(".modal-background, .modal .button-close").forEach(t=>t.addEventListener("click",_.closeActiveModal)),_.initAddListModalForm(),_.initModifyListModalForm(),_.initAddCardModalForm(),_.initModifyCardModalForm()},closeActiveModal(){const e=document.querySelector(".modal.is-active");if(e){const t=e.querySelector("form");t&&t.reset(),e.classList.remove("is-active")}},initErrorModal(e){_.closeActiveModal();const t=document.querySelector("#error-modal"),n=t.querySelector('[slot="error-title"]'),o=t.querySelector('[slot="error-message"]');n.textContent=e.status?`Erreur ${e.status}`:"Erreur",o.textContent=e.message,t.classList.add("is-active")},initAddListModalForm(){const e=document.querySelector("#add-list-modal form");e.addEventListener("submit",t);async function t(n){n.preventDefault();const o=new FormData(e),i=await S.createList(Object.fromEntries(o));if(i){const r=W.createListElem(i);document.querySelector("#lists-container").appendChild(r),e.reset(),_.closeActiveModal(),Ct("Liste créée","is-success")}}},initModifyListModalForm(){const e=document.querySelector("#modify-list-modal"),t=e.querySelector("form");t.addEventListener("submit",n);async function n(o){o.preventDefault();const i=e.dataset.id,r=new FormData(t),a=await S.modifyList(i,Object.fromEntries(r));a&&(document.querySelector(`section[data-id="${i}"] [slot="list-title"]`).textContent=a.title,t.reset(),_.closeActiveModal(),Ct("Liste Modifiée","is-success"))}},initAddCardModalForm(){const e=document.querySelector("#add-card-modal"),t=e.querySelector("form");t.addEventListener("submit",n);async function n(o){o.preventDefault();const i=e.dataset.id,r=new FormData(t),a=Object.fromEntries(r);a.list_id=i;const s=await S.createCard(a);if(s){const l=document.querySelector(`section[data-id="${i}"] .message-body`),c=ot.createCardElem(s);l.appendChild(c),t.reset(),_.closeActiveModal(),Ct("Carte Créée","is-success")}}},initModifyCardModalForm(){const e=document.querySelector("#modify-card-modal"),t=e.querySelector("form");t.addEventListener("submit",n);async function n(o){o.preventDefault();const i=e.dataset.id,r=new FormData(t),a=Object.fromEntries(r),s=await S.modifyCard(i,a);if(s){const l=document.querySelector(`.card[data-id="${i}"]`);l.querySelector('[slot="card-title"]').textContent=s.title,l.querySelector('[slot="card-content"]').textContent=s.content,l.querySelector(".card-color").style.backgroundColor=a.color,t.reset(),_.closeActiveModal(),Ct("Carte Modifiée","is-success")}}},initConfirmModal(e,t){const n=document.querySelector("#confirm-modal"),o=n.querySelector("button.is-success"),i=n.querySelector(".delete.close");i.removeEventListener("click",_.onConfirmModalClose),n.querySelector('[slot="confirm-message"]').textContent=e,o.addEventListener("click",()=>{o.replaceWith(o.cloneNode(!0)),_.closeActiveModal(),t()}),i.addEventListener("click",_.onConfirmModalClose),n.classList.add("is-active")},onConfirmModalClose(){const e=document.querySelector("#confirm-modal button.is-success");e.replaceWith(e.cloneNode(!0))},async initTagModal(e){const t=document.querySelector("#tag-modal"),n=t.querySelector('[slot="tags-container"]'),o=t.querySelector(".button-close");o.removeEventListener("click",_.onTagModalClose),n.innerHTML="",t.dataset.id=e;const i=await S.getTags(),r=await S.getCard(e),a=r.tags?r.tags:[];i.forEach(s=>{const l=document.createElement("button");l.dataset.id=s.id,l.textContent=s.name,l.classList.add("button","is-primary","is-outlined"),a.find(c=>c.id===s.id)&&l.classList.remove("is-outlined"),l.addEventListener("click",c=>{c.currentTarget.classList.toggle("is-outlined")}),n.appendChild(l)}),o.addEventListener("click",_.onTagModalClose),t.classList.add("is-active")},async onTagModalClose(e){const t=e.currentTarget.closest(".modal"),n=t.dataset.id,o=document.querySelector(`.card[data-id="${n}"]`),i=[...t.querySelectorAll('[slot="tags-container"] button')],r=[...o.querySelectorAll(".tag[data-id]")],a=o.querySelector('[slot="card-tags"]'),s=await S.getTags();for(const l of i){let c=r.find(f=>f.dataset.id===l.dataset.id);l.classList.contains("is-outlined")?(await S.dissociateCardFromTag(n,l.dataset.id),c&&c.remove()):(await S.associateCardToTag(n,l.dataset.id),c||(c=ge.createTagElem(s.find(f=>f.id===parseInt(l.dataset.id,10))),a.prepend(c)))}Ct("Tags modifiés","is-success")}};document.addEventListener("DOMContentLoaded",()=>{W.initLists(),_.initModals()});
